<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet author="v.darmakheev" id="scheme-init-1">
        <createTable tableName="books">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор книги">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="title" type="VARCHAR(255)" remarks="название книги"/>
            <column name="description" type="VARCHAR(2000)" remarks="описание"/>
            <column name="edition" type="INT" remarks="номер издания"/>
            <column name="isbn" type="VARCHAR(255)" remarks="международный стандартный книжный номер"/>
            <column name="udc" type="VARCHAR(255)" remarks="индекс универсальной десятичной классификации"/>
            <column name="bbk" type="VARCHAR(255)" remarks="индекс библиотечно - библиографической классификации"/>
            <column name="publication_year" type="INT" remarks="год издания"/>
            <column name="circulation" type="INT" remarks="тираж"/>
            <column name="price" type="DECIMAL" remarks="цена"/>
            <column name="in_stock" type="INT" remarks="в наличии"/>
            <column name="weight" type="INT" remarks="вес в граммах"/>
            <column name="age_limit_id" type="BIGINT" remarks="уникальный идентификатор возрастного ограничения"/>
            <column name="dimensions" type="VARCHAR(255)" remarks="размеры книги"/>
            <column name="cover_type_id" type="BIGINT" remarks="уникальный идентификатор типа обложки"/>
            <column name="page_count" type="INT" remarks="количество страниц"/>
            <column name="publisher_id" type="BIGINT" remarks="уникальный идентификатор издательства"/>
            <column name="book_series_id" type="BIGINT" remarks="уникальный идентификатор книжной серии"/>
            <column name="city_id" type="BIGINT" remarks="уникальный идентификатор города издания"/>
            <column name="language_id" type="BIGINT" remarks="уникальный идентификатор языка издания"/>
            <column name="cover_file_id" type="BIGINT" remarks="идентификатор файла обложки"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-2">
        <createTable tableName="authors">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор автора">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="first_name" type="VARCHAR(255)" remarks="имя"/>
            <column name="middle_name" type="VARCHAR(255)" remarks="отчество"/>
            <column name="last_name" type="VARCHAR(255)" remarks="фамилия"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-3">
        <createTable tableName="book_authors">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор записи">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="book_id" type="BIGINT" remarks="уникальный идентификатор книги"/>
            <column name="author_id" type="BIGINT" remarks="уникальный идентификатор автора"/>
            <column name="position" type="INT" remarks="позиция в списке авторов"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-4">
        <addForeignKeyConstraint baseColumnNames="book_id"
                                 baseTableName="book_authors"
                                 constraintName="book_id_book_authors_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="books"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-5">
        <addForeignKeyConstraint baseColumnNames="author_id"
                                 baseTableName="book_authors"
                                 constraintName="author_id_book_authors_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="authors"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-6">
        <createTable tableName="publishers">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор издательства">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название издательства"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-7">
        <addForeignKeyConstraint baseColumnNames="publisher_id"
                                 baseTableName="books"
                                 constraintName="publisher_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="publishers"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-8">
        <createTable tableName="book_series">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор книжной серии">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название серии"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="publisher_id" type="BIGINT" remarks="уникальный идентификатор издательства"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-9">
        <addForeignKeyConstraint baseColumnNames="publisher_id"
                                 baseTableName="book_series"
                                 constraintName="publisher_id_book_series_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="publishers"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-10">
        <createTable tableName="cities">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор города">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название города"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="code_city" type="VARCHAR(255)" remarks="код города"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-11">
        <addForeignKeyConstraint baseColumnNames="city_id"
                                 baseTableName="books"
                                 constraintName="city_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-12">
        <createTable tableName="languages">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор языка издания">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название языка"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="code_language" type="VARCHAR(255)" remarks="код языка"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-13">
        <addForeignKeyConstraint baseColumnNames="language_id"
                                 baseTableName="books"
                                 constraintName="language_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="languages"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-14">
        <createTable tableName="categories">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор категории">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название категории"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="parent_id" type="BIGINT" remarks="родительская категория"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-15">
        <createTable tableName="book_categories">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор записи">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="book_id" type="BIGINT" remarks="уникальный идентификатор книги"/>
            <column name="category_id" type="BIGINT" remarks="уникальный идентификатор категории"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-16">
        <addForeignKeyConstraint baseColumnNames="book_id"
                                 baseTableName="book_categories"
                                 constraintName="book_id_book_categories_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="books"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-17">
        <addForeignKeyConstraint baseColumnNames="category_id"
                                 baseTableName="book_categories"
                                 constraintName="category_id_book_categories_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="categories"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-18">
        <createTable tableName="age_limits">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор ограничения возраста">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-19">
        <addForeignKeyConstraint baseColumnNames="age_limit_id"
                                 baseTableName="books"
                                 constraintName="age_limit_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="age_limits"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-20">
        <createTable tableName="cover_types">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор типа обложки">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-21">
        <addForeignKeyConstraint baseColumnNames="cover_type_id"
                                 baseTableName="books"
                                 constraintName="cover_type_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="cover_types"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-22">
        <createTable tableName="orders">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор заказа">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="user_id" type="VARCHAR(255)" remarks="уникальный идентификатор пользователя"/>
            <column name="shop_city_id" type="BIGINT" remarks="уникальный идентификатор региона отправки"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="first_name" type="VARCHAR(255)" remarks="имя получателя заказа"/>
            <column name="middle_name" type="VARCHAR(255)" remarks="отчество получателя заказа"/>
            <column name="last_name" type="VARCHAR(255)" remarks="фамилия получателя заказа"/>
            <column name="email" type="VARCHAR(255)" remarks="email получателя заказа"/>
            <column name="phone_number" type="VARCHAR(255)" remarks="телефон получателя заказа"/>
            <column name="payment_method" type="VARCHAR(255)" remarks="способ оплаты заказа"/>
            <column name="comment" type="VARCHAR(2000)" remarks="комментарий к заказу"/>
            <column name="send_type" type="VARCHAR(255)" remarks="тип доставки"/>
            <column name="send_org_id" type="BIGINT" remarks="ид организации осуществляющей доставку"/>
            <column name="is_age_18" type="BOOLEAN" defaultValue="false" remarks="подтверждение совершенолетия"/>
            <column name="is_take_status_sms" type="BOOLEAN" defaultValue="false" remarks="оповещение по смс"/>
            <column name="is_take_status_email" type="BOOLEAN" defaultValue="false" remarks="оповещение по почте"/>
            <column name="total_cost" type="DECIMAL" remarks="общая стоимость"/>
            <column name="discount" type="DECIMAL" remarks="скидка"/>
            <column name="to_pay" type="DECIMAL" remarks="к оплате"/>
            <column name="pay_for" type="DECIMAL" remarks="оплачено"/>
            <column name="status" type="VARCHAR(255)" remarks="статус заказа"/>
            <column name="addr_index" type="VARCHAR(255)" remarks="адрес получателя (индекс)"/>
            <column name="addr_city" type="VARCHAR(255)" remarks="адрес получателя (город)"/>
            <column name="addr_street" type="VARCHAR(255)" remarks="адрес получателя (улица)"/>
            <column name="addr_house" type="VARCHAR(255)" remarks="адрес получателя (дом)"/>
            <column name="addr_housing" type="VARCHAR(255)" remarks="адрес получателя (корпус)"/>
            <column name="addr_building" type="VARCHAR(255)" remarks="адрес получателя (строение)"/>
            <column name="addr_room" type="VARCHAR(255)" remarks="адрес получателя (квартира)"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-23">
        <createTable tableName="order_items">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="order_id" type="BIGINT" remarks="уникальный идентификатор заказа"/>
            <column name="book_id" type="BIGINT" remarks="уникальный идентификатор книги"/>
            <column name="count" type="INT" remarks="количетсво книг с указанным id в заказе"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-24">
        <addForeignKeyConstraint baseColumnNames="order_id"
                                 baseTableName="order_items"
                                 constraintName="order_id_order_item_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="orders"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-25">
        <addForeignKeyConstraint baseColumnNames="book_id"
                                 baseTableName="order_items"
                                 constraintName="book_id_order_item_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="books"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-26">
        <createTable tableName="cart">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор корзины">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="user_id" type="VARCHAR(255)" remarks="уникальный идентификатор пользователя"/>
            <column name="temporary" type="BOOLEAN" remarks="корзина не авторизованного пользователя"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-27">
        <createTable tableName="cart_items">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="cart_id" type="BIGINT" remarks="уникальный идентификатор корзины"/>
            <column name="book_id" type="BIGINT" remarks="уникальный идентификатор книги"/>
            <column name="count" type="INT" remarks="количетсво книг с указанным id в корзине"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-28">
        <addForeignKeyConstraint baseColumnNames="cart_id"
                                 baseTableName="cart_items"
                                 constraintName="cart_id_cart_items_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="cart"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-29">
        <addForeignKeyConstraint baseColumnNames="book_id"
                                 baseTableName="cart_items"
                                 constraintName="book_id_cart_items_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="books"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-30">
        <createTable tableName="files">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор файла">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="оригинальное название файла"/>
            <column name="bucket" type="VARCHAR(255)" remarks="Бакет файла в s3"/>
            <column name="key" type="VARCHAR(255)" remarks="ключ файла в s3"/>
            <column name="mime_type" type="VARCHAR(255)" remarks="тип контента"/>
            <column name="file_size" type="BIGINT" remarks="размер файла"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-31">
        <addForeignKeyConstraint baseColumnNames="cover_file_id"
                                 baseTableName="books"
                                 constraintName="cover_file_id_books_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="files"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-32">
        <createTable tableName="s3init">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="init" type="BOOLEAN" remarks="был ли проинициализирован s3"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-33">
        <createTable tableName="promo_pictures">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор слайдера">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="url" type="VARCHAR(255)" remarks="ссылка на которую ведет слайдер"/>
            <column name="picture_file_id" type="BIGINT" remarks="id файла картинки слайдера"/>
            <column name="active" type="BOOLEAN" defaultValue="true" remarks="признак активности"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-34">
        <addForeignKeyConstraint baseColumnNames="picture_file_id"
                                 baseTableName="promo_pictures"
                                 constraintName="picture_id_promo_pictures_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="files"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-35">
        <createTable tableName="category_carousels">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор карусели">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="category_id" type="BIGINT" remarks="id категории для карусели"/>
            <column name="active" type="BOOLEAN" defaultValue="true" remarks="признак активности"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-36">
        <addForeignKeyConstraint baseColumnNames="category_id"
                                 baseTableName="category_carousels"
                                 constraintName="category_id_category_carousels_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="categories"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-37">
        <createTable tableName="shop_cities">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор города точек выдачи">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="coord_x" type="DOUBLE" remarks="координата города по широте"/>
            <column name="coord_y" type="DOUBLE" remarks="координата города по долготе"/>
            <column name="name" type="VARCHAR(255)" remarks="название города"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-38">
        <createTable tableName="pickup_points">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор точки выдачи товара">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="coord_x" type="DOUBLE" remarks="координата точки выдачи по широте"/>
            <column name="coord_y" type="DOUBLE" remarks="координата точки выдачи по долготе"/>
            <column name="name" type="VARCHAR(255)" remarks="название точки выдачи"/>
            <column name="shop_city_id" type="BIGINT" remarks="идентификатор города точки выдачи"/>
            <column name="work_period" type="VARCHAR(255)" remarks="период работы"/>
            <column name="icon_file_id" type="BIGINT" remarks="идентификатор файла иконки точки выдачи"/>
            <column name="addr" type="VARCHAR(255)" remarks="адрес точки выдачи"/>
            <column name="pay_case" type="VARCHAR(255)" remarks="способы оплаты доступные в точке выдачи"/>
            <column name="send_price" type="DECIMAL" remarks="стоимость доставки в точку выдачи"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-39">
        <addForeignKeyConstraint baseColumnNames="shop_city_id"
                                 baseTableName="pickup_points"
                                 constraintName="shop_city_id_pickup_points_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="shop_cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-40">
        <addForeignKeyConstraint baseColumnNames="shop_city_id"
                                 baseTableName="orders"
                                 constraintName="shop_city_id_orders_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="shop_cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-41">
        <addForeignKeyConstraint baseColumnNames="icon_file_id"
                                 baseTableName="pickup_points"
                                 constraintName="icon_file_id_pickup_points_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="files"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-42">
        <createTable tableName="profiles">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор профиля">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="user_id" type="VARCHAR(255)" remarks="уникальный идентификатор пользователя"/>
            <column name="shop_city_id" type="BIGINT" remarks="уникальный идентификатор региона отправки"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
            <column name="first_name" type="VARCHAR(255)" remarks="имя"/>
            <column name="middle_name" type="VARCHAR(255)" remarks="отчество"/>
            <column name="last_name" type="VARCHAR(255)" remarks="фамилия"/>
            <column name="email" type="VARCHAR(255)" remarks="email"/>
            <column name="phone_number" type="VARCHAR(255)" remarks="телефон"/>
            <column name="sex" type="VARCHAR(255)" remarks="пол"/>
            <column name="birthdate" type="VARCHAR(255)" remarks="дата рождения"/>
            <column name="addr_index" type="VARCHAR(255)" remarks="адрес (индекс)"/>
            <column name="addr_city" type="VARCHAR(255)" remarks="адрес (город)"/>
            <column name="addr_street" type="VARCHAR(255)" remarks="адрес (улица)"/>
            <column name="addr_house" type="VARCHAR(255)" remarks="адрес (дом)"/>
            <column name="addr_housing" type="VARCHAR(255)" remarks="адрес (корпус)"/>
            <column name="addr_building" type="VARCHAR(255)" remarks="адрес (строение)"/>
            <column name="addr_room" type="VARCHAR(255)" remarks="адрес (квартира)"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-43">
        <addForeignKeyConstraint baseColumnNames="shop_city_id"
                                 baseTableName="profiles"
                                 constraintName="shop_city_id_profiles_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="shop_cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-44">
        <createTable tableName="courier_services">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор курьерской службы">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название курьерской службы"/>
            <column name="shop_city_id" type="BIGINT" remarks="идентификатор города курьерской службы"/>
            <column name="icon_file_id" type="BIGINT" remarks="идентификатор файла иконки курьерской службы"/>
            <column name="pay_case" type="VARCHAR(255)" remarks="способы оплаты доступные у курьерской службы"/>
            <column name="send_price" type="DECIMAL" remarks="стоимость доставки курьерской службой"/>
            <column name="max_weight" type="BIGINT" remarks="максимальный вес посылки"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-45">
        <addForeignKeyConstraint baseColumnNames="shop_city_id"
                                 baseTableName="courier_services"
                                 constraintName="shop_city_id_courier_services_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="shop_cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-46">
        <addForeignKeyConstraint baseColumnNames="icon_file_id"
                                 baseTableName="courier_services"
                                 constraintName="icon_file_id_courier_services_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="files"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-47">
        <createTable tableName="mail_services">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор почтового отправления">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(255)" remarks="название почтового отправления"/>
            <column name="shop_city_id" type="BIGINT" remarks="идентификатор города почтового отправления"/>
            <column name="icon_file_id" type="BIGINT" remarks="идентификатор файла иконки почтового отправления"/>
            <column name="send_price_cost" type="DECIMAL" remarks="стоимость доставки почтового отправления"/>
            <column name="send_price_commission" type="DECIMAL" remarks="размер коммисии почтового отправления"/>
            <column name="deleted" type="BOOLEAN" defaultValue="false" remarks="признак удаления"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-48">
        <addForeignKeyConstraint baseColumnNames="shop_city_id"
                                 baseTableName="mail_services"
                                 constraintName="shop_city_id_mail_services_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="shop_cities"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-49">
        <addForeignKeyConstraint baseColumnNames="icon_file_id"
                                 baseTableName="mail_services"
                                 constraintName="icon_file_id_mail_services_fkey"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id"
                                 referencedTableName="files"/>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-50">
        <createTable tableName="payment_methods">
            <column autoIncrement="true" name="id" type="BIGINT" remarks="уникальный идентификатор способа оплаты">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="delivery_service_type" type="VARCHAR(255)" remarks="тип способа доставки"/>
            <column name="delivery_service_id" type="BIGINT" remarks="ил организации осуществлющей доставку"/>
            <column name="payment_method" type="VARCHAR(255)" remarks="способ оплаты"/>
        </createTable>
    </changeSet>
    <changeSet author="v.darmakheev" id="scheme-init-51" dbms="postgresql">
        <sql>
            ALTER SEQUENCE authors_id_seq RESTART with 1000000;
            ALTER SEQUENCE book_authors_id_seq RESTART with 1000000;
            ALTER SEQUENCE book_categories_id_seq RESTART with 1000000;
            ALTER SEQUENCE book_series_id_seq RESTART with 1000000;
            ALTER SEQUENCE books_id_seq RESTART with 1000000;
            ALTER SEQUENCE cart_id_seq RESTART with 1000000;
            ALTER SEQUENCE cart_items_id_seq RESTART with 1000000;
            ALTER SEQUENCE categories_id_seq RESTART with 1000000;
            ALTER SEQUENCE cities_id_seq RESTART with 1000000;
            ALTER SEQUENCE files_id_seq RESTART with 1000000;
            ALTER SEQUENCE languages_id_seq RESTART with 1000000;
            ALTER SEQUENCE age_limits_id_seq RESTART with 1000000;
            ALTER SEQUENCE cover_types_id_seq RESTART with 1000000;
            ALTER SEQUENCE order_items_id_seq RESTART with 1000000;
            ALTER SEQUENCE orders_id_seq RESTART with 1000000;
            ALTER SEQUENCE publishers_id_seq RESTART with 1000000;
            ALTER SEQUENCE promo_pictures_id_seq RESTART with 1000000;
            ALTER SEQUENCE category_carousels_id_seq RESTART with 1000000;
            ALTER SEQUENCE shop_cities_id_seq RESTART with 1000000;
            ALTER SEQUENCE pickup_points_id_seq RESTART with 1000000;
            ALTER SEQUENCE courier_services_id_seq RESTART with 1000000;
            ALTER SEQUENCE mail_services_id_seq RESTART with 1000000;
            ALTER SEQUENCE profiles_id_seq RESTART with 1000000;
            ALTER SEQUENCE payment_methods_id_seq RESTART with 1000000;
            ALTER SEQUENCE s3init_id_seq RESTART with 1000000;
        </sql>
    </changeSet>

</databaseChangeLog>

